version: "3.8"
services:
  caddy-reverse-proxy:
    image: "caddy:2.7.5"
    container_name: "caddy-reverse-proxy"
    labels:
      - "com.centurylinklabs.watchtower.enable=${AUTO_UPDATE}"
    cap_add:
      - NET_ADMIN
    volumes:
      - "${CADDYFILE_PATH}:/etc/caddy/Caddyfile"
      - "${SITE_PATH}:/etc/caddy/sites"
      - "${CONF_PATH}:/config"
      - "${DATA_PATH}:/data"
      - "${LOG_PATH}:/var/log/caddy"
      - "${DEFAULT_SITE_PATH}:/srv"
    ports:
      - "${HTTP}:80"
      - "${HTTPS}:443"
    restart: "unless-stopped"
